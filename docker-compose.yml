version: '3.8'

services:
  paddleocr-toolkit:
    build:
      context: .
      dockerfile: Dockerfile
    image: paddleocr-toolkit:latest
    container_name: paddleocr-toolkit
    volumes:
      - ./input:/data/input:ro
      - ./output:/data/output
    environment:
      - PYTHONUNBUFFERED=1
      - DISABLE_MODEL_SOURCE_CHECK=True
    # GPU support (uncomment if using GPU)
    # deploy:
    #   resources:
    #     reservations:
    #       devices:
    #         - driver: nvidia
    #           count: 1
    #           capabilities: [gpu]
    command: python paddle_ocr_tool.py /data/input/document.pdf --output /data/output
  # API service (if implementing FastAPI)
  # paddleocr-api:
  #   build:
  #     context: .
  #     dockerfile: Dockerfile
  #   ports:
  #     - "8000:8000"
  #   volumes:
  #     - ./data:/data
  #   environment:
  #     - PYTHONUNBUFFERED=1
  #   command: uvicorn api:app --host 0.0.0.0 --port 8000

volumes:
  input:
  output:
